name: Build APK with Docker

on: [workflow_dispatch]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    # Step 1: Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ø¯
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4
      
    # Step 2: Ø³Ø§Ø®Øª Ø¨Ø§ Docker (Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø¯Ø§Ø®Ù„ Docker Ù‡Ø³Øª)
    - name: ğŸ³ Build APK using Docker
      run: |
        docker run --rm \
          -v "$(pwd)":/src \
          -v buildozer-cache:/root/.buildozer \
          kivy/buildozer android debug
          
    # Step 3: Ø¢Ù¾Ù„ÙˆØ¯ APK
    - name: ğŸ“¤ Upload APK
      uses: actions/upload-artifact@v4
      with:
        name: telegram-bot-apk
        path: bin/*.apk
